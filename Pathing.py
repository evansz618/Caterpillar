#Enter code

import Testing as T
import time

shoulder_0 = [-146.196192729957, -149.310182670475, -153.88458379971, -158.509517366433, -161.937608977239, -162.917951051858, -162.215307997012, -161.440425646212, -160.597898392688, -159.692375114415, -158.728527084397, -157.711013727693, -156.64444770397, -155.533360707902, -154.38217123775, -153.195155393844, -151.976421546387, -150.729889471503, -149.459274311511, -148.168075484737, -146.859570463705, -145.536813166994, -144.202636574358, -142.859659078243, -141.510294026064, -140.156761882471, -138.801104443921, -137.44520056288, -136.090782879481, -134.739455108385, -133.392709482646, -132.051944009996, -130.71847924666, -129.393574337023, -128.078442102292, -126.774262986927, -125.482197687429, -124.203398294399, -122.939017776166, -121.690217621812, -120.458173444665, -119.244078326323, -118.049143658501, -116.874597218816, -115.72167820057, -114.591628910225, -113.485682854199, -112.405048963768, -111.350891757799, -110.324307321203, -109.326295084113, -115.332266759054, -121.043028119393, -126.420285147445, -131.409622109271, -135.947568528897, -139.967672535444, -143.404753694907, -146.196192729957]
knee_0= [75.5224878140701, 81.6403341843416, 89.855137780405, 97.8815498988781, 103.991687377726, 106.689650442895, 107.119860159272, 107.455155546892, 107.698076972298, 107.851146795548, 107.916895738253, 107.897884072869, 107.796718068737, 107.616062154157, 107.358647283181, 107.027276022711, 106.624824893755, 106.154244506536, 105.618558020731, 105.020858439421, 104.364305209646, 103.652120556216, 102.887585921386, 102.074038824283, 101.214870393344, 100.313523764943, 99.3734934836867, 98.3983259857672, 97.3916211968222, 96.357035230097, 95.298284128724, 94.2191485569294, 93.1234793077906, 92.015203458607, 90.898330967745, 89.7769614678352, 88.655290968457, 87.5376181363498, 86.4283497725811, 85.3320050544984, 84.2532180570122, 83.1967380151515, 82.1674267414336, 81.1702525722928, 80.2102801938949, 79.2926556967491, 78.4225862392337, 77.6053137715097, 76.8460823917968, 76.1500990831886, 75.5224878140701, 78.7370204539618, 81.0107006548372, 82.3678536763416, 82.8192442185417, 82.3678536763416, 81.0107006548372, 78.7370204539618, 75.5224878140701]


def Stop():
    T.set_speed(1,0)
    T.set_speed(2,0)
   
def reset():
    T.pos1.reset()
    T.pos2.reset()

def set_angle(theta1, theta2):
    k=10
    kv = 25
    corr = 4.533333
    speed_corr = 2.22222
    diff1 = 100000
    diff2 = 100000
    temp1 = T.pos1.value()/corr
    temp2 = T.pos2.value()/corr
    tic = time.ticks_ms()
    time.sleep_ms(10)
    toc = time.ticks_ms()
    time.sleep_ms(10)
    while diff1 > 1 or diff2 > 1:
        tic = time.ticks_ms()
        t = toc - tic
        current1 = T.pos1.value()/corr
        #print(current1)
        current2 = T.pos2.value()/corr
        #print(current1)
        vdiff1 = (current1-temp1)/t
        vdiff2 = (current1-temp1)/t
        #print("tic: " ,tic)
        #print("current1: ", current1, " Current 2: ", current2)
        diff1 = theta1 - current1
        speed1 = int(diff1*k + kv*vdiff1)
        #print("diff1: " , diff1)
        diff2 = theta2 - current2
        speed2 = int(diff2*k + kv*vdiff2)
        T.set_speed(1,speed1)
        print("Speed1: ", speed1)
        T.set_speed(2,speed2)
        temp1 = T.pos1.value()/corr
        temp2 = T.pos2.value()/corr
        toc = time.ticks_ms()
        #print("toc: ", toc)
        time.sleep_ms(10)
        
    Stop()
        
def swing():
    shoulder = shoulder_0
    knee = knee_0
    for i in range(50):
        set_angle(knee[i],shoulder[i])
        print("knee angle: ", knee[i])
        print("shoulder angle: ", shoulder[i])
        time.sleep_ms(100)
        

reset()







